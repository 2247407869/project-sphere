# 🔧 LobeChat MCP手动配置指南

## 😤 是的，确实需要手动添加！

我之前的自动配置方法不对，LobeChat需要在界面中手动添加MCP服务器。

## 📋 正确的配置步骤

### 1. 访问LobeChat
打开浏览器访问: http://localhost:3210

### 2. 进入设置页面
- 点击左下角的 **设置图标** ⚙️
- 或者点击右上角的 **用户头像** → **设置**

### 3. 找到MCP相关设置
在设置页面中查找以下选项卡（可能的位置）：
- **"插件"** 或 **"Plugins"**
- **"MCP服务器"** 或 **"MCP Servers"** 
- **"扩展"** 或 **"Extensions"**
- **"高级设置"** → **MCP相关选项**
- **"工具"** 或 **"Tools"**

### 4. 添加MCP服务器
找到 **"添加服务器"** 或 **"Add Server"** 按钮，填写：

```
名称/Name: Graphiti Memory
URL: http://localhost:8000/mcp/stream
传输方式/Transport: HTTP
协议/Protocol: MCP
```

### 5. 保存并启用
- 点击 **保存** 或 **Save**
- 确保服务器状态显示为 **"已连接"** 或 **"Connected"**

## 🔍 如何验证配置成功

### 在LobeChat界面中查看：
1. **插件列表**中应该显示 "Graphiti Memory"
2. **状态**应该显示为 "已启用" 或 "已连接"
3. **在对话中**可能会看到工具调用图标

### 测试对话：
发送消息：
```
请记住：我正在测试Graphiti记忆功能
```

如果配置成功，AI应该会：
- 自动调用 `add_episode` 工具
- 显示工具调用过程
- 确认记忆已保存

## ❌ 如果找不到MCP设置

### 可能的原因：
1. **LobeChat版本太旧**，不支持MCP
2. **MCP功能未启用**
3. **界面语言问题**，选项名称不同

### 解决方法：
1. **重启LobeChat容器**：
   ```bash
   docker-compose restart lobechat
   ```

2. **清除浏览器缓存**并刷新页面

3. **检查浏览器控制台**是否有错误信息（F12 → Console）

4. **尝试不同的设置选项卡**，MCP设置可能在不同位置

## 🆘 如果还是不行

### 备用方案：
1. **直接测试MCP服务器**：
   ```bash
   node verify-mcp-config.js
   ```

2. **检查LobeChat日志**：
   ```bash
   docker-compose logs lobechat
   ```

3. **使用其他MCP客户端**测试我们的服务器是否正常

## 📞 需要帮助？

如果按照这个指南还是无法配置成功，请告诉我：
1. 你在LobeChat设置中看到了哪些选项卡？
2. 有没有看到任何MCP、插件或扩展相关的选项？
3. 浏览器控制台有没有错误信息？

我会根据你的具体情况提供更精确的指导。